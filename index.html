<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xperto - Build Your Future</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%2300C853'/></svg>">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX Transpilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- PDF.js for Resume Parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js`;</script>


    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            cursor: none; 
            background-color: #000; 
        }

        .custom-cursor {
            position: fixed;
            width: 24px;
            height: 24px;
            border: 2px solid #00C853;
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
            z-index: 9999;
            left: -100px; /* Initially hide off-screen */
        }

        button:hover ~ .custom-cursor, a:hover ~ .custom-cursor, [onclick]:hover ~ .custom-cursor, input[type=file] ~ .custom-cursor, label:hover ~ .custom-cursor {
             width: 40px;
             height: 40px;
             background-color: rgba(0, 200, 83, 0.1);
        }

        @keyframes marquee { 
            0% { transform: translateX(0); } 
            100% { transform: translateX(-50%); } 
        }
        .animate-marquee { 
            animation: marquee 15s linear infinite; 
        }
        
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }

        @keyframes slide-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in-up {
            animation: slide-in-up 0.6s ease-out forwards;
        }

        .hero-grid-background {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32' width='32' height='32' fill='none' stroke='rgb(156 163 175 / 0.1)'%3E%3Cpath d='M0 .5H32V32'/%3E%3C/svg%3E");
        }

        .word-container {
            display: inline-block;
            position: relative;
            vertical-align: baseline;
            text-align: center;
        }
        .word-sizer {
            visibility: hidden; 
        }
        .rotating-word {
            position: absolute;
            top: 0;
            left: 0;
            right: 0; 
            bottom: 0;
            display: inline-block;
            opacity: 0;
            animation: rotate-word 1.5s ease-in-out forwards; 
        }
        
        @keyframes rotate-word {
            0%   { transform: translateY(100%); opacity: 0; }
            20%  { transform: translateY(0); opacity: 1; }
            80%  { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100%); opacity: 0; }
        }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- MOCK DATA ---
        const MOCK_COURSES = [
            { id: 1, title: 'Frontend Fundamentals', price: 499, level: 'Beginner', description: 'Master HTML, CSS, and JavaScript basics.', instructor: 'Ananya Sharma' },
            { id: 2, title: 'React Deep Dive', price: 4999, level: 'Advanced', description: 'Become a pro in React, hooks, and state management.', instructor: 'Rohan Verma' },
            { id: 3, title: 'Full-Stack with Firebase', price: 7999, level: 'Advanced', description: 'Build and deploy full-stack apps with Firebase.', instructor: 'Priya Patel' },
        ];

        const MOCK_JOBS = [
            { id: 1, title: 'Frontend Developer Intern', company: 'Growth Co.', category: 'Web Dev', skill: 'React', duration: '3 Months' },
            { id: 2, title: 'UI/UX Design Freelancer', company: 'Designs.ai', category: 'Design', skill: 'Figma', duration: 'Project-based' },
            { id: 3, title: 'Content Writer', company: 'Blogify', category: 'Writing', skill: 'SEO', duration: '6 Months' },
            { id: 4, title: 'React Native Developer', company: 'MobileFirst', category: 'Web Dev', skill: 'React', duration: '4 Months' },
        ];
        
        const MOCK_TESTIMONIALS = [
            { name: 'Sameer Singh', role: 'SDE at Amazon', text: 'Xperto\'s resume optimizer was a game-changer. The AI feedback helped me land my dream job!', image: `https://placehold.co/100x100/334155/e2e8f0?text=SS` },
            { name: 'Neha Gupta', role: 'Product Manager', text: 'The advanced courses are brilliant. The instructors are industry experts who provide real-world insights.', image: `https://placehold.co/100x100/334155/e2e8f0?text=NG` },
            { name: 'Vikram Rao', role: 'Freelance Designer', text: 'I found my first freelance gig through Xperto. The platform is incredibly easy to use and effective.', image: `https://placehold.co/100x100/334155/e2e8f0?text=VR` },
        ];
        
        const partnerLogos = [
            { name: 'CRED', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#f8f9fa">CRED</text></svg> },
            { name: 'Upstox', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#2d00f7">Upstox</text></svg> },
            { name: 'Razorpay', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#0296ff">Razorpay</text></svg> },
            { name: 'Swiggy', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#fc8019">Swiggy</text></svg> },
            { name: 'Zomato', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#ef4f5f">Zomato</text></svg> },
            { name: 'PhonePe', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#5f259f">PhonePe</text></svg> },
            { name: 'Nykaa', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#fc2779">Nykaa</text></svg> },
            { name: 'Groww', logo: <svg viewBox="0 0 215 80"><text x="50%" y="50%" dominantBaseline="middle" textAnchor="middle" fontSize="40" fontWeight="bold" fill="#00d09c">Groww</text></svg> },
        ];

        // --- GEMINI API CALL HELPERS ---
        const parseGeminiResponse = (responseText) => {
            // The backend now sends clean JSON, so we just need to parse it.
            // The old logic for cleaning markdown is kept as a fallback.
            try {
                return JSON.parse(responseText);
            } catch (e) {
                console.warn("Response was not clean JSON, attempting to clean markdown...");
                let jsonString = responseText.trim();
                if (jsonString.startsWith('```json')) {
                    jsonString = jsonString.substring(7, jsonString.length - 3).trim();
                } else if (jsonString.startsWith('```')) {
                    jsonString = jsonString.substring(3, jsonString.length - 3).trim();
                }

                const startIndex = jsonString.indexOf('{');
                const endIndex = jsonString.lastIndexOf('}');
                if (startIndex === -1 || endIndex === -1 || endIndex < startIndex) {
                     throw new Error("Could not find a valid JSON object in the server response.");
                }
                
                const finalJsonString = jsonString.substring(startIndex, endIndex + 1);
                return JSON.parse(finalJsonString);
            }
        };
        
        const callGeminiAPI = async (systemPrompt) => {
            try {
                const url = window.location.origin + '/.netlify/functions/call-gemini';
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: systemPrompt }),
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Network response was not ok: ${response.status}. ${errorText}`);
                }
                
                // The backend function now returns clean JSON, so we expect text that is directly parsable.
                const responseText = await response.text();
                try {
                    // Because the Netlify function sends a clean JSON string as the body,
                    // we can often just use response.json() if the content-type header is set correctly.
                    // But using response.text() and then parsing is safer.
                    const report = JSON.parse(responseText);
                    console.log("Received and parsed detailed report from Netlify function:", report);
                    return report;
                } catch (e) {
                    console.error("Failed to parse the JSON response from the server.", e);
                    console.error("Raw response from server:", responseText);
                    // Attempt to clean it up as a fallback
                    const report = parseGeminiResponse(responseText);
                    return report;
                }

            } catch (error) {
                console.error("Failed to fetch analysis from Netlify function:", error);
                throw error; // Re-throw the error to be caught by the caller
            }
        };

        const callResumeGeminiAPI = (resumeText) => {
            console.log("Calling Netlify Function for RESUME analysis with improved prompt...");
            const systemPrompt = `
            You are 'Xperto AI', a world-class, ATS-focused resume analyzer for the edtech platform Xperto. Your analysis must be sharp, specific, and directly based on the provided resume text. You must not give generic advice. Your goal is to generate a structured, actionable report in a strict JSON format.

            **Core Directives:**
            1.  **ATS & Recruiter Focus:** Every piece of advice must prioritize compatibility with modern Applicant Tracking Systems (ATS) and appeal to human recruiters.
            2.  **Strictly Content-Specific:** All findings, scores, tips, and examples MUST be directly derived from the resume text. Do not invent information. Reference specific phrases from the resume where possible.
            3.  **Scoring Logic:** Scores (0-100) must be calculated logically. A high score requires strong action verbs, quantifiable achievements, relevant keywords, and clear formatting. A low score indicates missing sections, passive language, or lack of detail. The 'overallScore' is an average of the section scores.
            4.  **Actionable & Detailed Feedback:** 'freeFindings' should be high-level observations. 'quickTips' are simple, immediate fixes. 'lockedContent' must provide deep, expert-level advice, with 'detailedTips' explaining the "why," and 'examples' showing concrete, rewritten improvements based on the user's own text.
            5.  **Strict JSON Output:** The entire response must be a single, valid JSON object adhering to the schema below. No extra text, markdown, or explanations outside the JSON.

            **JSON Schema to Follow:**
            {
              "overallScore": "<number - Average score of all sections>",
              "overallSummary": "<string - A 2-sentence summary of the resume's key strengths and primary area for improvement.>",
              "topFixes": [
                {
                  "id": "<string - Unique ID, e.g., 'fix1'>",
                  "title": "<string - A short, impactful title for the most critical issue, e.g., 'Quantify Achievements'>",
                  "hint": "<string - A brief explanation of why this fix is important, e.g., 'Adding numbers shows your impact.'>",
                  "score": "<number - A score from 1-10 indicating the impact of this fix (10 is highest impact).>",
                  "sectionId": "<string - The ID of the section this fix applies to, e.g., 'experience'>"
                }
              ],
              "sections": [
                {
                  "id": "summary",
                  "title": "Professional Summary",
                  "score": "<number - 0-100 score for this section>",
                  "freeFindings": ["<string - e.g., 'Summary section is present.' or 'Summary is too long.'>"],
                  "quickTips": ["<string - e.g., 'Tailor the summary to the job description.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - In-depth advice, e.g., 'Incorporate 2-3 key skills from your target role directly into your summary to immediately catch a recruiter's eye.'>"],
                    "examples": [{ "before": "<string - Snippet from user's resume>", "after": "<string - A rewritten, improved version>" }],
                    "explanation": "<string - Why the 'after' version is better for ATS and recruiters.>"
                  }
                },
                {
                  "id": "experience",
                  "title": "Work Experience",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Used action verbs like "Managed" and "Developed".'>"],
                  "quickTips": ["<string - e.g., 'Start each bullet point with a strong action verb.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - e.g., 'Focus on the STAR method (Situation, Task, Action, Result) to frame your accomplishments. Quantify results with metrics like percentages, revenue figures, or time saved.'>"],
                    "examples": [{ "before": "<string - e.g., 'Responsible for managing social media accounts.'>", "after": "<string - e.g., 'Grew social media engagement by 35% over 6 months by implementing a data-driven content strategy across Instagram and Twitter.'>" }],
                    "explanation": "<string - e.g., 'The "after" example uses a specific metric (35%) and action-oriented language, making the achievement much more concrete and impressive.'>"
                  }
                },
                {
                  "id": "skills",
                  "title": "Skills",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'A good mix of technical and soft skills is listed.'>"],
                  "quickTips": ["<string - e.g., 'Separate skills into categories like "Programming Languages", "Tools", and "Certifications".'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - e.g., 'Ensure your skills section mirrors the keywords found in job descriptions for your target roles. ATS often screen for these exact keywords.'>"],
                    "examples": [{ "before": "<string - e.g., 'Skills: Python, Leadership, JavaScript'>", "after": "<string - e.g., 'Technical Skills: Python (Pandas, NumPy), JavaScript (React, Node.js), SQL, AWS (S3, EC2)\\nSoft Skills: Project Management, Team Leadership, Agile Methodologies'>" }],
                    "explanation": "<string - Categorization and adding specific libraries/frameworks makes your proficiency clearer and is better for keyword matching.'>"
                  }
                },
                {
                  "id": "projects",
                  "title": "Projects",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Project descriptions are clear.'>"],
                  "quickTips": ["<string - e.g., 'Include a link to the live project or GitHub repository.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - e.g., 'For each project, briefly describe the problem you solved, the tech stack you used, and your specific contribution.'>"],
                    "examples": [{ "before": "<string - e.g., 'Made a website.'>", "after": "<string - e.g., 'Portfolio Website: Developed a responsive personal portfolio using React and Tailwind CSS, deployed on Vercel. Implemented a contact form with Netlify Forms.'>" }],
                    "explanation": "<string - The improved version clearly states the purpose, technologies, and features, demonstrating practical skills.'>"
                  }
                },
                {
                  "id": "education",
                  "title": "Education",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Education section is formatted correctly.'>"],
                  "quickTips": ["<string - e.g., 'Include your expected graduation date if you are still a student.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - e.g., 'If your GPA is above 3.5 (or equivalent), include it. You can also list relevant coursework to showcase specialized knowledge.'>"],
                    "examples": [{ "before": "<string - e.g., 'B.Tech, Computer Science'>", "after": "<string - e.g., 'Bachelor of Technology in Computer Science, XYZ University (Expected May 2025)\\nCGPA: 8.5/10\\nRelevant Coursework: Data Structures & Algorithms, Database Management Systems, Operating Systems.'>" }],
                    "explanation": "<string - Adding GPA, graduation date, and relevant courses provides recruiters with more context about your academic performance and knowledge base.'>"
                  }
                },
                {
                  "id": "other",
                  "title": "Achievements/Other",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Includes certifications.'>"],
                  "quickTips": ["<string - e.g., 'Create a separate section for "Certifications" or "Awards" if you have several.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - e.g., 'Quantify achievements from hackathons or competitions (e.g., "1st place out of 50 teams"). Mention leadership roles in clubs or organizations.'>"],
                    "examples": [{ "before": "<string - e.g., 'Won a hackathon.'>", "after": "<string - e.g., 'Winner, Smart India Hackathon 2023: Led a team of 4 to develop a prize-winning solution for a healthcare challenge statement, placing 1st among 100+ competing teams.'>" }],
                    "explanation": "<string - Specificity about the event, your role, and the scale of your achievement makes it far more impactful.'>"
                  }
                }
              ]
            }

            **Resume Text to Analyze:**
            ---
            ${resumeText}
            ---`;
            return callGeminiAPI(systemPrompt);
        };
        
        const callLinkedInGeminiAPI = (profileUrl) => {
            console.log("Calling Netlify Function for LINKEDIN analysis with improved prompt...");
            const systemPrompt = `
            You are 'Xperto AI', a world-class LinkedIn profile optimizer for the edtech platform Xperto. Your analysis must be sharp, specific, and focused on making the user's profile highly attractive to recruiters. You must not give generic advice. Your goal is to generate a structured, actionable report in a strict JSON format. You will be given a URL, and you should analyze the profile based on the public information typically available on a LinkedIn profile.

            **Core Directives:**
            1.  **Recruiter & Networking Focus:** Every piece of advice must be geared towards optimizing the profile for search visibility (LinkedIn SEO), recruiter appeal, and professional networking.
            2.  **Strictly Content-Specific:** All findings, scores, tips, and examples must be based on what a strong LinkedIn profile should contain. When creating 'before' examples, infer what a weak version might look like if the user's profile is strong, or use their actual (implied) content if it's weak.
            3.  **Scoring Logic:** Scores (0-100) must be calculated logically. A high score requires a professional photo, a keyword-rich headline, a compelling 'About' section, detailed experience with metrics, and an active skills section. The 'overallScore' is an average of the section scores.
            4.  **Actionable & Detailed Feedback:** 'freeFindings' are high-level observations. 'quickTips' are simple fixes. 'lockedContent' must provide deep, expert-level advice, with 'detailedTips' explaining the "why," and 'examples' showing concrete, rewritten improvements.
            5.  **Strict JSON Output:** The entire response must be a single, valid JSON object adhering to the schema below. No extra text or explanations.

            **JSON Schema to Follow:**
            {
              "overallScore": "<number - Average score of all sections>",
              "overallSummary": "<string - A 2-sentence summary of the profile's key strengths and primary area for improvement.>",
              "topFixes": [
                {
                  "id": "<string - Unique ID, e.g., 'fix_headline'>",
                  "title": "<string - A short, impactful title, e.g., 'Optimize Your Headline'>",
                  "hint": "<string - Brief explanation, e.g., 'Your headline is crucial for search results.'>",
                  "score": "<number - Impact score 1-10>",
                  "sectionId": "<string - The ID of the section this fix applies to, e.g., 'headline'>"
                }
              ],
              "sections": [
                {
                  "id": "profile_picture",
                  "title": "Profile Picture & Banner",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Has a professional headshot.'>"],
                  "quickTips": ["<string - e.g., 'Ensure your banner image reflects your professional interests or industry.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - A professional photo should be high-resolution, with a plain background, where you are looking at the camera and smiling. A custom banner is much better than the default.'>"],
                    "examples": [{ "before": "<string - A description of a weak photo/banner, e.g., 'Using a distant group photo and default blue banner.'>", "after": "<string - A description of a strong photo/banner, e.g., 'Clear, friendly headshot with a custom banner that includes keywords like "Software Development | React | Cloud Computing".'>" }],
                    "explanation": "<string - First impressions matter. A professional photo and custom banner make your profile look complete and serious.'>"
                  }
                },
                {
                  "id": "headline",
                  "title": "Headline",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Headline clearly states current role.'>"],
                  "quickTips": ["<string - e.g., 'Add keywords related to your target roles.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - Your headline is prime real estate for keywords. Go beyond just your job title. Include key skills, technologies, and what you're passionate about. Use the pipe character '|' to separate ideas.'>"],
                    "examples": [{ "before": "<string - e.g., 'Student at XYZ University'>", "after": "<string - e.g., 'Aspiring Software Engineer | React, Node.js, and Python Developer | Seeking Internships in Web Development'>" }],
                    "explanation": "<string - The 'after' headline is rich with keywords recruiters search for, making the profile much more discoverable.'>"
                  }
                },
                {
                  "id": "about",
                  "title": "About Section",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'About section provides a good overview.'>"],
                  "quickTips": ["<string - e.g., 'End with a clear call to action, like inviting people to connect.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - Structure your 'About' section in 3 paragraphs: 1) Who you are and what you're excited about. 2) Your key skills and 1-2 top achievements. 3) What you're looking for and how to contact you. Sprinkle in relevant keywords.'>"],
                    "examples": [{ "before": "<string - e.g., 'I am a student studying computer science.'>", "after": "<string - e.g., 'Passionate final-year Computer Science student with a strong foundation in full-stack web development... [continues with more detail]... Open to connecting about software engineering internship opportunities.'>" }],
                    "explanation": "<string - A structured 'About' section tells your professional story, showcases your skills, and makes it easy for recruiters to understand your goals.'>"
                  }
                },
                {
                  "id": "experience",
                  "title": "Experience Section",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Experience descriptions are present.'>"],
                  "quickTips": ["<string - e.g., 'Use 2-3 bullet points for each role.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - Just like a resume, use action verbs and quantify your achievements with metrics for each role or project listed. This demonstrates impact, not just responsibility.'>"],
                    "examples": [{ "before": "<string - e.g., 'Wrote code for the company website.'>", "after": "<string - e.g., '- Refactored the checkout process component in React, reducing bug reports by 15% and improving user session duration.\\n- Collaborated with a team of 3 to deploy a new feature using CI/CD pipelines.'>" }],
                    "explanation": "<string - Specific, quantified bullet points are far more persuasive and give a clear picture of your capabilities.'>"
                  }
                },
                {
                  "id": "skills",
                  "title": "Skills & Endorsements",
                  "score": "<number - 0-100 score>",
                  "freeFindings": ["<string - e.g., 'Has more than 10 skills listed.'>"],
                  "quickTips": ["<string - e.g., 'Pin your top 3 most relevant skills to the top of the list.'>"],
                  "lockedContent": {
                    "detailedTips": ["<string - Aim for at least 15-20 relevant skills. The more skills you have that match a job description, the higher you may rank in recruiter searches. Actively seek endorsements from colleagues and professors for your top skills.'>"],
                    "examples": [{ "before": "<string - e.g., 'Only having 5 skills listed with no endorsements.'>", "after": "<string - e.g., 'Having 20+ skills, with the top 3 (e.g., "React.js", "Node.js", "Python") pinned and endorsed by multiple connections.'>" }],
                    "explanation": "<string - A robust skills section with endorsements provides social proof of your abilities and significantly boosts your profile's visibility in searches.'>"
                  }
                }
              ]
            }

            **LinkedIn Profile URL to Analyze:**
            ---
            ${profileUrl}
            ---`;
            return callGeminiAPI(systemPrompt);
        };

        // --- ASSETS & ICONS ---
        const Logo = () => (
            <svg className="h-8 w-auto text-gray-100" viewBox="0 0 170 50" xmlns="http://www.w3.org/2000/svg">
                <text x="0" y="36" fontFamily="Inter, system-ui, sans-serif" fontSize="38" fontWeight="bold" fill="currentColor">
                    Xpert
                </text>
                <g transform="translate(118, 0)">
                    <path d="M 25 2.5 A 22.5 22.5 0 1 1 2.5 25" stroke="#00C853" strokeWidth="3.5" fill="none" strokeLinecap="round" />
                    <path d="M 25 47.5 A 22.5 22.5 0 1 1 47.5 25" stroke="#64ffda" strokeWidth="3.5" fill="none" strokeLinecap="round" />
                    <circle cx="2.5" cy="25" r="4.5" fill="#00C853" />
                    <circle cx="47.5" cy="25" r="4.5" fill="#64ffda" />
                    <circle cx="25" cy="2.5" r="4.5" fill="white" />
                </g>
            </svg>
        );

        const CheckCircleIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-[#00C853] mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const LightbulbIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" className="w-full h-auto" viewBox="0 0 64 64" fill="none">
                <g strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round">
                    <g stroke="#FFFF00" strokeOpacity="0.8">
                        <path d="M32 6V10" />
                        <path d="M22.5 14.5L25 17" />
                        <path d="M15 26H19" />
                        <path d="M41.5 14.5L39 17" />
                        <path d="M49 26H45" />
                    </g>
                    <path d="M32 44C39.73 44 46 37.73 46 30C46 22.27 39.73 16 32 16C24.27 16 18 22.27 18 30C18 34.05 20.08 37.67 23 40.1" stroke="#00C853"/>
                    <path d="M32 44C39.73 44 46 37.73 46 30C46 22.27 39.73 16 32 16C24.27 16 18 22.27 18 30C18 34.05 20.08 37.67 23 40.1" fill="#FFFF00" fillOpacity="0.2"/>
                    <path d="M28 30L36 34" stroke="#FFFF00" strokeWidth="2"/>
                    <path d="M36 30L28 34" stroke="#FFFF00" strokeWidth="2"/>
                    <g stroke="#9ca3af">
                       <path d="M25 44H39" />
                       <path d="M26 48H38" />
                       <path d="M28 52H36" />
                    </g>
                </g>
            </svg>
        );
        
        const SparklesIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6.343 6.343l2.829 2.829M17.657 17.657l2.829 2.829M12 21v-4M19 12h-4M5 12H1m11-7l2.828-2.828M17.657 6.343L14.828 9.172" />
            </svg>
        );

        const LockIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>);
        const CheckIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-green-400 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>);
        const ChevronRightIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" className={className || "h-4 w-4 text-gray-500"} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" /></svg>);
        const ChevronDownIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" className={className || "h-5 w-5"} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /></svg>);


        // --- CONTEXT API for State Management ---
        const AppContext = React.createContext();

        const AppProvider = ({ children }) => {
            const [page, setPage] = React.useState('home');
            const [user, setUser] = React.useState(null);
            const [loading, setLoading] = React.useState(false);
            const [notifications, setNotifications] = React.useState([]);

            const showNotification = (message, type = 'success') => {
                const id = Date.now();
                setNotifications(prev => [...prev, { id, message, type }]);
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== id));
                }, 3000);
            };

            const value = { page, setPage, user, setUser, loading, setLoading, showNotification };

            return (
                <AppContext.Provider value={value}>
                    {children}
                    <NotificationCenter notifications={notifications} />
                </AppContext.Provider>
            );
        };

        const useAppContext = () => React.useContext(AppContext);

        // --- CORE UI COMPONENTS ---
        const Header = () => {
            const { page, setPage, user } = useAppContext();
            const [isMenuOpen, setIsMenuOpen] = React.useState(false);
            const navItems = [
                { id: 'home', label: 'Home' },
                { id: 'courses', label: 'Courses' },
                { id: 'analyzer', label: 'AI Analyzer' },
                { id: 'freelance', label: 'Find Internships' },
            ];
            
            const handleNavClick = (pageId) => {
                setPage(pageId);
                setIsMenuOpen(false);
            };

            return (
                <header className="bg-black/50 backdrop-blur-md sticky top-0 z-40 border-b border-gray-800">
                    <nav className="container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
                        <div className="flex items-center cursor-pointer" onClick={() => handleNavClick('home')}>
                            <Logo />
                        </div>
                        <div className="hidden md:flex items-center space-x-8">
                            {navItems.map(item => (
                                <button key={item.id} onClick={() => handleNavClick(item.id)} className={`text-gray-300 hover:text-white transition-colors duration-300 relative group ${page === item.id ? 'font-semibold text-white' : ''}`}>
                                    {item.label}
                                    <span className={`absolute bottom-[-4px] left-0 w-full h-0.5 bg-[#00C853] transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 ${page === item.id ? 'scale-x-100' : ''}`}></span>
                                </button>
                            ))}
                        </div>
                        <div className="flex items-center space-x-4">
                            {user ? (
                                <button onClick={() => handleNavClick('dashboard')} className="px-5 py-2 text-sm font-medium text-black bg-[#00C853] rounded-lg hover:bg-green-400 focus:outline-none transition-all duration-300 hover:scale-105">Dashboard</button>
                            ) : (
                                <button onClick={() => handleNavClick('login')} className="hidden sm:block px-5 py-2 text-sm font-medium text-gray-200 bg-gray-800 rounded-lg border border-gray-700 hover:bg-gray-700 focus:outline-none transition-all duration-300 hover:scale-105">Login</button>
                            )}
                            <div className="md:hidden">
                                <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-gray-300 hover:text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500">
                                    <span className="sr-only">Open main menu</span>
                                    {isMenuOpen ? (
                                        <svg className="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" /></svg>
                                    ) : (
                                        <svg className="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                                    )}
                                </button>
                            </div>
                        </div>
                    </nav>
                    {isMenuOpen && (
                        <div className="md:hidden animate-fade-in">
                            <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                                {navItems.map(item => (
                                    <button key={item.id} onClick={() => handleNavClick(item.id)} className={`block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors ${page === item.id ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}>
                                        {item.label}
                                    </button>
                                ))}
                                {!user && (
                                     <button onClick={() => handleNavClick('login')} className="sm:hidden block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Login</button>
                                )}
                            </div>
                        </div>
                    )}
                </header>
            );
        };

        const Footer = () => (
            <footer className="bg-gray-900 text-white border-t border-gray-800">
                <div className="container mx-auto px-4 sm:px-6 py-12">
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
                        <div>
                            <h3 className="font-bold text-lg mb-4">Xperto</h3>
                            <p className="text-gray-400 text-sm">Upskilling India's Future Workforce.</p>
                        </div>
                        <div>
                            <h3 className="font-semibold mb-4">Navigate</h3>
                            <ul className="space-y-2 text-gray-400 text-sm">
                                <li><a href="#" className="hover:text-[#00C853]">Courses</a></li>
                                <li><a href="#" className="hover:text-[#00C853]">AI Analyzer</a></li>
                                <li><a href="#" className="hover:text-[#00C853]">Find Internships</a></li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="font-semibold mb-4">Legal</h3>
                            <ul className="space-y-2 text-gray-400 text-sm">
                                <li><a href="#" className="hover:text-[#00C853]">Terms of Service</a></li>
                                <li><a href="#" className="hover:text-[#00C853]">Privacy Policy</a></li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="font-semibold mb-4">Connect</h3>
                            <ul className="space-y-2 text-gray-400 text-sm">
                                <li><a href="#" className="hover:text-[#00C853]">Twitter</a></li>
                                <li><a href="#" className="hover:text-[#00C853]">LinkedIn</a></li>
                            </ul>
                        </div>
                    </div>
                    <div className="mt-12 border-t border-gray-700 pt-8 text-center text-gray-500 text-sm">
                        <p>&copy; {new Date().getFullYear()} Xperto. All rights reserved.</p>
                    </div>
                </div>
            </footer>
        );

        const NotificationCenter = ({ notifications }) => (
            <div className="fixed bottom-5 right-5 z-50 space-y-3">
                {notifications.map(n => (
                    <div key={n.id} className={`px-4 py-3 rounded-lg shadow-lg text-white font-semibold animate-slide-in-up ${n.type === 'success' ? 'bg-green-600' : 'bg-red-600'}`}>
                        {n.message}
                    </div>
                ))}
            </div>
        );

        const Card = ({ children, className }) => (
            <div className={`bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden transition-all duration-300 hover:border-[#00C853]/50 hover:shadow-[0_0_20px_rgba(0,200,83,0.3)] md:hover:-translate-y-1 ${className}`}>
                {children}
            </div>
        );
        
        const Modal = ({ title, children, onClose }) => (
            <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in p-4">
                <div className="bg-gray-900 border border-gray-800 rounded-lg shadow-lg w-full max-w-lg p-6">
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-xl font-bold text-white">{title}</h2>
                        <button onClick={onClose} className="text-gray-500 hover:text-white text-3xl leading-none">&times;</button>
                    </div>
                    <div>{children}</div>
                </div>
            </div>
        );


        // --- PAGES ---
        const HomePage = () => {
            const { setPage } = useAppContext();
            const rotatingWords = ['Internships', 'Placements', 'Upskilling'];
            const [currentIndex, setCurrentIndex] = React.useState(0);
            const [key, setKey] = React.useState(0);

            React.useEffect(() => {
                const interval = setInterval(() => {
                    setCurrentIndex((prevIndex) => (prevIndex + 1) % rotatingWords.length);
                    setKey(prevKey => prevKey + 1);
                }, 1500); 

                return () => clearInterval(interval);
            }, []);

            return (
                <div className="animate-fade-in">
                    <section className="py-20 md:py-32 bg-black relative overflow-hidden">
                        <div className="absolute inset-0 hero-grid-background"></div>
                        <div className="container mx-auto px-4 sm:px-6 text-center relative">
                            <h1 className="text-4xl sm:text-5xl md:text-6xl font-extrabold text-white leading-tight">
                                 <div className="flex justify-center items-baseline flex-wrap">
                                    <span>Xperto,</span>
                                    <span className="word-container mx-2 text-[#00C853]">
                                        <span className="word-sizer">Placements</span>
                                        <span className="rotating-word" key={key}>
                                            {rotatingWords[currentIndex]}
                                        </span>
                                    </span>
                                    <span>Simplified!</span>
                                </div>
                                <div>
                                    Build Your <span className="text-[#00C853]">Future</span> Now.
                                </div>
                            </h1>
                            <p className="mt-6 text-base md:text-lg text-gray-400 max-w-2xl mx-auto">
                                Xperto is the ultimate platform for students to learn in-demand skills, optimize their career tools, and connect with real-world opportunities.
                            </p>
                            <div className="mt-10 flex flex-col sm:flex-row items-center justify-center gap-4">
                                <button onClick={() => setPage('courses')} className="w-full sm:w-auto px-8 py-3 text-lg font-semibold text-black bg-[#00C853] rounded-lg shadow-sm hover:bg-green-400 transform hover:scale-105 transition-all duration-300">
                                    Explore Courses
                                </button>
                                <button onClick={() => setPage('analyzer')} className="w-full sm:w-auto px-8 py-3 text-lg font-semibold text-gray-200 bg-gray-800 border border-gray-700 rounded-lg shadow-sm hover:bg-gray-700 hover:border-gray-600 transform hover:scale-105 transition-all duration-300">
                                    Analyze My Profile
                                </button>
                            </div>
                        </div>
                    </section>
                    <section className="py-12 bg-[#0A0A0A] border-y border-gray-800">
                        <div className="container mx-auto px-4 sm:px-6">
                            <h3 className="text-center text-base md:text-lg font-medium text-gray-500 mb-8">Trusted by talent acquisition teams at top Indian startups</h3>
                            <div className="relative overflow-hidden group -mx-4">
                                <div className="animate-marquee group-hover:[animation-play-state:paused] whitespace-nowrap">
                                    {[...partnerLogos, ...partnerLogos].map((p, i) => (
                                        <div key={i} className="inline-flex items-center justify-center align-middle w-28 mx-2 sm:w-36 sm:mx-3 md:w-48 md:mx-4 opacity-80 hover:opacity-100 transition-opacity duration-300">
                                            {p.logo}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </section>
                    <section className="py-20 md:py-24 bg-black">
                        <div className="container mx-auto px-4 sm:px-6">
                            <div className="grid md:grid-cols-2 gap-12 md:gap-16 items-center">
                                <div className="max-w-md mx-auto order-last md:order-first">
                                   <LightbulbIcon />
                                </div>
                                <div>
                                    <h2 className="text-3xl sm:text-4xl font-bold text-white">Supercharge Your Career with <span className="text-[#00C853]">AI</span></h2>
                                    <p className="mt-4 text-gray-400">Our AI-powered tool analyzes your Resume and LinkedIn profile against millions of data points to give you a competitive edge.</p>
                                    <ul className="mt-6 space-y-4">
                                        <li className="flex items-start"><CheckCircleIcon /><div><span className="font-semibold text-gray-200">ATS Optimization:</span> <span className="text-gray-400">Ensure your resume is parsed correctly by applicant tracking systems.</span></div></li>
                                        <li className="flex items-start"><CheckCircleIcon /><div><span className="font-semibold text-gray-200">Keyword Analysis:</span> <span className="text-gray-400">We identify and suggest keywords tailored to your target job roles.</span></div></li>
                                        <li className="flex items-start"><CheckCircleIcon /><div><span className="font-semibold text-gray-200">Impactful Metrics:</span> <span className="text-gray-400">Learn how to quantify your achievements to demonstrate your value.</span></div></li>
                                    </ul>
                                    <button onClick={() => setPage('analyzer')} className="mt-8 px-8 py-3 text-lg font-semibold text-black bg-[#00C853] rounded-lg shadow-sm hover:bg-green-400 transition-all duration-300">
                                        Get Your Free Analysis
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section className="py-20 md:py-24 bg-[#0A0A0A]">
                        <div className="container mx-auto px-4 sm:px-6">
                            <div className="text-center max-w-3xl mx-auto">
                                <h2 className="text-3xl sm:text-4xl font-bold text-white">Explore Our Top Courses</h2>
                                <p className="mt-4 text-gray-400">Curated programs designed to teach you the most in-demand skills for today's job market.</p>
                            </div>
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12 md:mt-16">
                                {MOCK_COURSES.slice(0, 3).map(course => (
                                    <Card key={course.id} className="flex flex-col">
                                        <div className="p-6 flex-grow">
                                            <p className="text-sm font-semibold text-[#00C853]">{course.level}</p>
                                            <h3 className="text-xl font-bold mt-2 text-white">{course.title}</h3>
                                            <p className="text-gray-400 mt-2 text-sm">{course.description}</p>
                                        </div>
                                        <div className="p-6 border-t border-gray-800">
                                            <button onClick={() => setPage('courses')} className="w-full py-2 font-semibold text-[#00C853] bg-green-500/10 rounded-lg hover:bg-green-500/20 transition-colors">
                                                Learn More
                                            </button>
                                        </div>
                                    </Card>
                                ))}
                            </div>
                        </div>
                    </section>
                    <section className="py-20 md:py-24 bg-black">
                        <div className="container mx-auto px-4 sm:px-6">
                            <div className="text-center max-w-3xl mx-auto">
                                <h2 className="text-3xl sm:text-4xl font-bold text-white">Everything You Need to Succeed</h2>
                                <p className="mt-4 text-gray-400">From learning to earning, we've got you covered at every step of your career journey.</p>
                            </div>
                            <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-8 mt-12 md:mt-16">
                                <Card><div className="p-8"><h3 className="text-xl font-bold mb-2 text-white">AI Career Tools</h3><p className="text-gray-400 text-sm">Optimize your resume and LinkedIn profile to stand out.</p></div></Card>
                                <Card><div className="p-8"><h3 className="text-xl font-bold mb-2 text-white">Expert-Led Courses</h3><p className="text-gray-400 text-sm">Learn in-demand skills from industry professionals.</p></div></Card>
                                <Card><div className="p-8"><h3 className="text-xl font-bold mb-2 text-white">Mock Interviews</h3><p className="text-gray-400 text-sm">Practice with AI and human experts to ace any interview.</p></div></Card>
                                <Card><div className="p-8"><h3 className="text-xl font-bold mb-2 text-white">Internships & Gigs</h3><p className="text-gray-400 text-sm">Apply for internships and part-time work to build real experience.</p></div></Card>
                            </div>
                        </div>
                    </section>
                    <section className="py-20 md:py-24 bg-[#0A0A0A]">
                        <div className="container mx-auto px-4 sm:px-6">
                            <div className="text-center max-w-3xl mx-auto">
                                <h2 className="text-3xl sm:text-4xl font-bold text-white">Trusted by Ambitious Learners</h2>
                                <p className="mt-4 text-gray-400">See how Xperto has impacted the careers of students just like you.</p>
                            </div>
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12 md:mt-16">
                                {MOCK_TESTIMONIALS.map(t => (
                                    <Card key={t.name} className="p-8">
                                        <p className="text-gray-300 italic mb-6">"{t.text}"</p>
                                        <div className="flex items-center">
                                            <img src={t.image} alt={t.name} className="w-12 h-12 rounded-full mr-4" />
                                            <div>
                                                <p className="font-bold text-white">{t.name}</p>
                                                <p className="text-sm text-gray-500">{t.role}</p>
                                            </div>
                                        </div>
                                    </Card>
                                ))}
                            </div>
                        </div>
                    </section>
                    <section className="py-20 md:py-24 bg-black">
                        <div className="container mx-auto px-4 sm:px-6 max-w-3xl">
                            <div className="text-center max-w-3xl mx-auto">
                                <h2 className="text-3xl sm:text-4xl font-bold text-white">Frequently Asked Questions</h2>
                            </div>
                            <div className="space-y-6 mt-12">
                                <div>
                                    <h4 className="font-semibold text-lg text-gray-200">Who are the courses for?</h4>
                                    <p className="text-gray-400 mt-1">Our courses are designed for students and early-career professionals looking to upskill in tech and business domains.</p>
                                </div>
                                <div className="border-t border-gray-800 my-4"></div>
                                <div>
                                    <h4 className="font-semibold text-lg text-gray-200">Is the resume analysis really free?</h4>
                                    <p className="text-gray-400 mt-1">Yes, the initial analysis report is completely free. You only pay for the detailed, AI-powered optimization suggestions.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section className="py-20 md:py-24 bg-[#0A0A0A]">
                        <div className="container mx-auto px-4 sm:px-6 text-center">
                            <h2 className="text-3xl sm:text-4xl font-bold text-white">Ready to Elevate Your Career?</h2>
                            <p className="text-gray-400 mt-4 max-w-xl mx-auto">Join thousands of students on their journey to success. Your next big opportunity is just a click away.</p>
                            <button onClick={() => setPage('login')} className="mt-8 px-8 py-3 text-lg font-semibold text-black bg-[#00C853] rounded-lg shadow-lg shadow-green-500/20 hover:bg-green-400 transform hover:scale-105 transition-all duration-300">
                                Sign Up for Free
                            </button>
                        </div>
                    </section>
                </div>
            );
        };
        
        const AnalyzerPage = () => {
            const { showNotification } = useAppContext();
            const [analyzerType, setAnalyzerType] = React.useState('resume');
            
            // Resume states
            const [file, setFile] = React.useState(null);
            const [resumeText, setResumeText] = React.useState('');
            
            // LinkedIn states
            const [url, setUrl] = React.useState('');

            // Shared states
            const [report, setReport] = React.useState(null);
            const [isReportUnlocked, setIsReportUnlocked] = React.useState(false);
            const [loading, setLoading] = React.useState(false);
            const [activeView, setActiveView] = React.useState({ type: 'top_fixes', id: null });
            const [openAccordionId, setOpenAccordionId] = React.useState(null);

            const resetState = () => {
                setFile(null);
                setResumeText('');
                setUrl('');
                setReport(null);
                setIsReportUnlocked(false);
                setLoading(false);
                setActiveView({ type: 'top_fixes', id: null });
                setOpenAccordionId(null);
            };

            React.useEffect(() => {
                resetState();
            }, [analyzerType]);


            const getScoreColor = (score) => {
                if (score <= 60) return '#ef4444'; // Red
                if (score <= 90) return '#facc15'; // Yellow
                return '#4ade80'; // Green
            };
            
            const handleFileChange = async (e) => {
                const uploadedFile = e.target.files[0];
                if (!uploadedFile) return;

                setFile(uploadedFile);
                const reader = new FileReader();
                reader.onload = async (event) => {
                    const typedarray = new Uint8Array(event.target.result);
                    try {
                        const pdf = await pdfjsLib.getDocument(typedarray).promise;
                        let textContent = '';
                        for (let i = 1; i <= pdf.numPages; i++) {
                            const page = await pdf.getPage(i);
                            const text = await page.getTextContent();
                            textContent += text.items.map(s => s.str).join(' ');
                        }
                        setResumeText(textContent);
                        showNotification('Resume loaded successfully!', 'success');
                    } catch (error) {
                        console.error("Error parsing PDF:", error);
                        showNotification('Could not read the PDF file.', 'error');
                        setFile(null);
                    }
                };
                reader.readAsArrayBuffer(uploadedFile);
            };

            const handleAnalyze = async () => {
                setLoading(true);
                setReport(null);

                const maxAttempts = 3;
                let result = null;

                for (let attempt = 1; attempt <= maxAttempts; attempt++) {
                    try {
                        console.log(`Analysis attempt ${attempt}...`);
                        if (analyzerType === 'resume') {
                            if (!resumeText) {
                                showNotification('Please upload a resume to analyze.', 'error');
                                setLoading(false);
                                return;
                            }
                            result = await callResumeGeminiAPI(resumeText);
                        } else {
                            if (!url.trim()) {
                                showNotification('Please enter a LinkedIn profile URL.', 'error');
                                setLoading(false);
                                return;
                            }
                            result = await callLinkedInGeminiAPI(url);
                        }

                        if (result) {
                            console.log("Analysis successful!");
                            break; // Exit loop on success
                        }
                    } catch (error) {
                        console.error(`Attempt ${attempt} failed:`, error);
                        if (attempt === maxAttempts) {
                            setLoading(false);
                            const errorMessage = error.message.toLowerCase();
                            if (errorMessage.includes("503") || errorMessage.includes("overloaded")) {
                                showNotification('AI analyzer is busy. Please try again in a moment.', 'error');
                            } else {
                                showNotification('Analysis failed after multiple attempts. Please try again.', 'error');
                            }
                            return;
                        }
                        // Wait 1 second before retrying
                        await new Promise(res => setTimeout(res, 1000));
                    }
                }
                
                setLoading(false);

                if (result) {
                    setReport(result);
                    if (result.topFixes && result.topFixes.length > 0) {
                        const firstFix = result.topFixes[0];
                        setActiveView({ type: 'top_fixes', id: firstFix.sectionId });
                        setOpenAccordionId(firstFix.id);
                    }
                    showNotification('Free analysis complete!', 'success');
                } else if (!result && maxAttempts > 0) {
                     showNotification('Analysis failed. Please try again.', 'error');
                }
            };

            const ScoreDonut = ({ score }) => {
                const color = getScoreColor(score);
                const circumference = 2 * Math.PI * 45;
                const offset = circumference - (score / 100) * circumference;

                return (
                    <div className="relative w-32 h-32 sm:w-40 sm:h-40">
                        <svg className="w-full h-full" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="transparent" stroke="#374151" strokeWidth="10" />
                            <circle
                                cx="50" cy="50" r="45"
                                fill="transparent"
                                stroke={color}
                                strokeWidth="10"
                                strokeDasharray={circumference}
                                strokeDashoffset={offset}
                                strokeLinecap="round"
                                transform="rotate(-90 50 50)"
                                style={{ transition: 'stroke-dashoffset 0.5s ease-in-out' }}
                            />
                        </svg>
                        <div className="absolute inset-0 flex items-center justify-center">
                            <span className="text-3xl sm:text-4xl font-bold" style={{ color }}>{score}</span>
                        </div>
                    </div>
                );
            };

            const BadgeScore = ({ score }) => {
                const color = getScoreColor(score * 10);
                return <div className="w-8 h-8 flex items-center justify-center rounded-md font-bold text-lg text-white flex-shrink-0" style={{backgroundColor: color}}>{score}</div>
            };
            
            const LockedContent = ({ onUnlock }) => (
                 <div className="mt-8 relative">
                    <div className="blur-sm pointer-events-none space-y-6 opacity-60">
                         <div>
                            <h3 className="text-lg font-semibold text-gray-200">Detailed Improvements</h3>
                            <p className="mt-2 text-sm text-gray-400 bg-gray-800/50 p-3 rounded-md">Unlock to see detailed, AI-powered suggestions and examples.</p>
                        </div>
                        <div>
                            <h3 className="text-lg font-semibold text-gray-200">Rewritten Examples (Before/After)</h3>
                             <div className="mt-2 p-4 border border-gray-700 rounded-lg">
                                <p className="text-xs text-red-400 font-semibold">Before: "Worked on a website."</p>
                                <p className="text-xs text-green-400 font-semibold mt-2">After: "Developed a portfolio website using React, improving load time by 40%."</p>
                            </div>
                        </div>
                    </div>
                    <div className="absolute inset-0 bg-gray-900/80 flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-700 p-4 text-center">
                        <button onClick={onUnlock} className="px-6 py-3 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400 transition-colors flex items-center shadow-lg shadow-green-500/20">
                            <LockIcon /> Unlock Full Report for 49
                        </button>
                    </div>
                </div>
            );

             const AccordionContent = ({ section, isReportUnlocked, onUnlock, topFix }) => {
                if (!section) return null;
                return (
                    <div className="lg:hidden p-4 bg-gray-800/50 animate-fade-in border-t border-gray-700">
                        {topFix ? (
                            <div className="mb-4">
                                <h2 className="text-lg font-bold text-white mb-1 break-words">Top Fix: <span className="text-[#00C853]">{topFix.title}</span></h2>
                                <p className="text-gray-400 text-sm break-words">{topFix.hint}</p>
                            </div>
                        ) : (
                            <h2 className="text-lg font-bold text-white mb-4 break-words">{section.title}</h2>
                        )}
                        
                        <div className="border-t border-gray-700 pt-4">
                            <h3 className="text-md font-semibold text-white">Key Findings</h3>
                            <ul className="mt-2 space-y-1.5">
                                {(section.freeFindings || []).map((finding, i) => <li key={i} className="flex items-start text-sm text-gray-300"><CheckIcon /><span className="min-w-0 break-words">{finding}</span></li>)}
                            </ul>
                        </div>
                        
                        <div className="mt-4">
                            <h3 className="text-md font-semibold text-white">Free Quick Fixes</h3>
                            <ul className="mt-2 space-y-1.5">
                                {(section.quickTips || []).map((tip, i) => <li key={i} className="flex items-start text-sm text-gray-300"><CheckIcon /><span className="min-w-0 break-words">{tip}</span></li>)}
                            </ul>
                        </div>

                        {isReportUnlocked && section.lockedContent ? (
                            <div className="mt-6 space-y-6">
                                <div>
                                    <h3 className="text-md font-bold text-green-400">Detailed Improvements</h3>
                                    <ul className="mt-2 list-disc list-inside text-gray-300 text-sm space-y-1.5 break-words">
                                        {section.lockedContent.detailedTips.map((tip, i) => <li key={i}>{tip}</li>)}
                                    </ul>
                                </div>
                                <div>
                                    <h3 className="text-md font-bold text-green-400">Rewritten Examples</h3>
                                    <div className="mt-2 space-y-3">
                                        {section.lockedContent.examples.map((ex, i) => (
                                            <div key={i} className="p-3 border border-gray-700 rounded-lg">
                                                <p className="text-xs font-semibold text-red-400">Before:</p>
                                                <p className="text-xs text-gray-400 italic pl-3 border-l-2 border-red-500/50 ml-1 py-1 break-words">"{ex.before}"</p>
                                                <p className="text-xs text-semibold text-green-400 mt-2">After:</p>
                                                <p className="text-xs text-gray-200 pl-3 border-l-2 border-green-500/50 ml-1 py-1 whitespace-pre-wrap break-words">{ex.after}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                <div>
                                    <h3 className="text-md font-bold text-green-400">Why It Matters</h3>
                                    <p className="mt-2 text-sm text-gray-300 break-words">{section.lockedContent.explanation}</p>
                                </div>
                            </div>
                        ) : (
                            <LockedContent onUnlock={onUnlock} />
                        )}
                    </div>
                );
            };

            const MainContentPane = ({ report, activeView, isReportUnlocked, onUnlock }) => {
                if (!activeView.id || !report) return <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6 sm:p-8 text-center"><p className="text-gray-400">Select an item from the sidebar to see details.</p></div>;

                const section = report.sections.find(s => s.id === activeView.id);
                if (!section) return null;

                const topFixForSection = report.topFixes.find(f => f.sectionId === section.id);

                return (
                    <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6 sm:p-8">
                        {activeView.type === 'top_fixes' && topFixForSection ? (
                            <>
                                <h2 className="text-xl md:text-2xl font-bold text-white mb-1 break-words">Top Fix: <span className="text-[#00C853]">{topFixForSection.title}</span></h2>
                                <p className="text-gray-400 mb-6 break-words">This is one of the highest-impact changes you can make to the <span className="font-semibold text-gray-300">{section.title}</span> section.</p>
                                
                                <div className="border-t border-gray-700 pt-6">
                                     <h3 className="text-lg font-semibold text-white">Key Findings</h3>
                                      <ul className="mt-3 space-y-2">
                                          {(section.freeFindings || []).map((finding, i) => <li key={i} className="flex items-start text-gray-300"><CheckIcon /><span className="min-w-0 break-words">{finding}</span></li>)}
                                      </ul>
                                </div>
                                
                                <div className="mt-6">
                                    <h3 className="text-lg font-semibold text-white">Free Quick Fixes</h3>
                                    <ul className="mt-3 space-y-2">
                                        {(section.quickTips || []).map((tip, i) => <li key={i} className="flex items-start text-gray-300"><CheckIcon /><span className="min-w-0 break-words">{tip}</span></li>)}
                                    </ul>
                                </div>

                                {isReportUnlocked && section.lockedContent ? (
                                    <div className="mt-8 space-y-8 animate-fade-in">
                                        <div>
                                            <h3 className="text-lg md:text-xl font-bold text-green-400">Detailed Improvements</h3>
                                            <ul className="mt-3 list-disc list-inside text-gray-300 space-y-2 break-words">
                                                {section.lockedContent.detailedTips.map((tip, i) => <li key={i}>{tip}</li>)}
                                            </ul>
                                        </div>
                                         <div>
                                            <h3 className="text-lg md:text-xl font-bold text-green-400">Rewritten Examples</h3>
                                            <div className="mt-3 space-y-4">
                                            {section.lockedContent.examples.map((ex, i) => (
                                                <div key={i} className="p-4 border border-gray-700 rounded-lg">
                                                    <p className="text-sm font-semibold text-red-400">Before:</p>
                                                    <p className="text-sm text-gray-400 italic pl-4 border-l-2 border-red-500/50 ml-2 py-1 break-words">"{ex.before}"</p>
                                                    <p className="text-sm font-semibold text-green-400 mt-3">After:</p>
                                                    <p className="text-sm text-gray-200 pl-4 border-l-2 border-green-500/50 ml-2 py-1 whitespace-pre-wrap break-words">{ex.after}</p>
                                                </div>
                                            ))}
                                            </div>
                                        </div>
                                        <div>
                                            <h3 className="text-lg md:text-xl font-bold text-green-400">Why It Matters</h3>
                                            <p className="mt-2 text-gray-300 break-words">{section.lockedContent.explanation}</p>
                                        </div>
                                    </div>
                                ) : (
                                    <LockedContent onUnlock={onUnlock} />
                                )}
                            </>
                        ) : (
                             <>
                                <div className={`p-4 rounded-lg flex flex-col sm:flex-row items-center justify-between bg-gray-800 gap-4 sm:gap-2`}>
                                    <h2 className="flex-grow text-xl md:text-2xl font-bold text-white text-center sm:text-left break-words min-w-0">{section.title}</h2>
                                    <div className={`flex items-center justify-center rounded-full bg-gray-900 font-bold w-14 h-14 text-2xl border-2 flex-shrink-0`} style={{borderColor: getScoreColor(section.score), color: getScoreColor(section.score)}}>
                                        {section.score}
                                    </div>
                                </div>
                                <div className="mt-6 border-b border-gray-700 pb-6">
                                    <h3 className="text-lg font-semibold text-white">Free Findings</h3>
                                    <ul className="mt-3 space-y-2">
                                        {(section.freeFindings || []).map((finding, i) => <li key={i} className="flex items-start text-gray-300"><CheckIcon /><span className="min-w-0 break-words">{finding}</span></li>)}
                                    </ul>
                                </div>
                                 <div className="mt-6">
                                    <h3 className="text-lg font-semibold text-white">Free Quick Fixes</h3>
                                    <ul className="mt-3 space-y-2">
                                        {(section.quickTips || []).map((tip, i) => <li key={i} className="flex items-start text-gray-300"><CheckIcon /><span className="min-w-0 break-words">{tip}</span></li>)}
                                    </ul>
                                </div>
                                
                                {isReportUnlocked && section.lockedContent ? (
                                    <div className="mt-8 space-y-8 animate-fade-in">
                                        <div>
                                            <h3 className="text-lg md:text-xl font-bold text-green-400">Detailed Improvements</h3>
                                            <ul className="mt-3 list-disc list-inside text-gray-300 space-y-2 break-words">
                                                {section.lockedContent.detailedTips.map((tip, i) => <li key={i}>{tip}</li>)}
                                            </ul>
                                        </div>
                                         <div>
                                            <h3 className="text-lg md:text-xl font-bold text-green-400">Rewritten Examples</h3>
                                            <div className="mt-3 space-y-4">
                                            {section.lockedContent.examples.map((ex, i) => (
                                                <div key={i} className="p-4 border border-gray-700 rounded-lg">
                                                    <p className="text-sm font-semibold text-red-400">Before:</p>
                                                    <p className="text-sm text-gray-400 italic pl-4 border-l-2 border-red-500/50 ml-2 py-1 break-words">"{ex.before}"</p>
                                                    <p className="text-sm font-semibold text-green-400 mt-3">After:</p>
                                                    <p className="text-sm text-gray-200 pl-4 border-l-2 border-green-500/50 ml-2 py-1 whitespace-pre-wrap break-words">{ex.after}</p>
                                                </div>
                                            ))}
                                            </div>
                                        </div>
                                        <div>
                                            <h3 className="text-lg md:text-xl font-bold text-green-400">Why It Matters</h3>
                                            <p className="mt-2 text-gray-300 break-words">{section.lockedContent.explanation}</p>
                                        </div>
                                    </div>
                                ) : (
                                    <LockedContent onUnlock={onUnlock} />
                                )}
                             </>
                        )}
                    </div>
                );
            };

            const AnalyzerInput = () => (
                <>
                    <div className="max-w-3xl mx-auto text-center">
                        <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-white">AI Profile Analyzer</h1>
                        <p className="mt-4 text-gray-400">Get an instant analysis of your Resume or LinkedIn profile to identify weaknesses and outshine the competition.</p>
                    </div>

                    <div className="max-w-2xl mx-auto mt-12">
                        <div className="flex justify-center p-1 bg-gray-800 rounded-lg mb-6">
                            <button onClick={() => setAnalyzerType('resume')} className={`w-1/2 py-2.5 text-sm font-semibold rounded-md transition-colors ${analyzerType === 'resume' ? 'bg-[#00C853] text-black' : 'text-gray-400 hover:text-white'}`}>
                                Resume Analyzer
                            </button>
                            <button onClick={() => setAnalyzerType('linkedin')} className={`w-1/2 py-2.5 text-sm font-semibold rounded-md transition-colors ${analyzerType === 'linkedin' ? 'bg-[#00C853] text-black' : 'text-gray-400 hover:text-white'}`}>
                                LinkedIn Analyzer
                            </button>
                        </div>

                        {analyzerType === 'resume' ? (
                            <Card className="p-6 sm:p-8 hover:border-[#00C853]/50 transition-colors">
                                <div className="flex justify-center">
                                    <label htmlFor="resume-upload" className="cursor-pointer text-center p-8 border-2 border-dashed border-gray-600 rounded-xl hover:border-green-500 hover:bg-gray-800/50 transition-colors w-full">
                                        <svg xmlns="http://www.w3.org/2000/svg" className="mx-auto h-12 w-12 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>
                                        <p className="mt-2 font-semibold text-white">Click to Upload your Resume</p>
                                        <p className="text-xs text-gray-500">PDF up to 5MB</p>
                                    </label>
                                    <input id="resume-upload" type="file" accept=".pdf" onChange={handleFileChange} className="hidden"/>
                                </div>
                                {file && <p className="mt-4 text-sm text-center text-gray-400">Selected: <span className="font-semibold text-gray-200">{file.name}</span></p>}
                                <button onClick={handleAnalyze} disabled={loading || !file} className="mt-6 w-full py-3 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400 disabled:bg-gray-600 disabled:cursor-not-allowed transition-transform duration-200 disabled:transform-none hover:scale-105">
                                    {loading ? 'Analyzing...' : 'Grade My Resume'}
                                </button>
                            </Card>
                        ) : (
                            <Card className="p-6 sm:p-8 hover:border-[#00C853]/50 transition-colors">
                                <div className="space-y-4">
                                    <input type="text" value={url} onChange={(e) => setUrl(e.target.value)} placeholder="Paste your LinkedIn Profile URL here" className="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-[#00C853] focus:outline-none"/>
                                    <button onClick={handleAnalyze} disabled={loading || !url} className="w-full py-3 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400 disabled:bg-gray-600 disabled:cursor-not-allowed transition-transform duration-200 disabled:transform-none hover:scale-105">
                                        {loading ? 'Analyzing...' : 'Analyze My LinkedIn'}
                                    </button>
                                </div>
                            </Card>
                        )}
                    </div>
                </>
            );

            return (
                <div className="container mx-auto px-4 sm:px-6 py-12 md:py-16 animate-fade-in min-h-screen">
                    {!report ? (
                        <AnalyzerInput />
                    ) : (
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-8 animate-slide-in-up">
                            <aside className="lg:col-span-4 xl:col-span-3">
                                <div className="p-4 rounded-xl bg-gray-900 border border-gray-800 lg:sticky lg:top-24">
                                    <div className="flex flex-col items-center">
                                        <ScoreDonut score={report.overallScore} />
                                        <p className="mt-3 text-center text-sm text-gray-400 break-words">{report.overallSummary}</p>
                                    </div>
                                    
                                    <h3 className="font-semibold text-gray-200 mt-6 mb-3">Top Fixes</h3>
                                    <div className="space-y-2">
                                        {(report.topFixes || []).map(fix => {
                                            const section = report.sections.find(s => s.id === fix.sectionId);
                                            const isAccordionOpen = openAccordionId === fix.id;
                                            return (
                                                <div key={fix.id} className={`rounded-lg overflow-hidden transition-colors duration-200 ${isAccordionOpen ? 'bg-gray-800' : 'bg-transparent'}`}>
                                                    <button onClick={() => {
                                                                setActiveView({ type: 'top_fixes', id: fix.sectionId });
                                                                setOpenAccordionId(isAccordionOpen ? null : fix.id);
                                                            }}
                                                        className={`w-full text-left p-3 flex items-center border-2 transition-colors ${activeView.type === 'top_fixes' && activeView.id === fix.sectionId ? `border-green-500 lg:bg-gray-800` : 'border-transparent'} ${isAccordionOpen ? 'lg:bg-transparent' : ''} hover:bg-gray-800/50`}>
                                                        <BadgeScore score={fix.score} />
                                                        <div className="ml-3 flex-grow overflow-hidden min-w-0">
                                                            <p className="font-semibold text-gray-100 truncate">{fix.title}</p>
                                                            <p className="text-xs text-gray-400 truncate">{fix.hint}</p>
                                                        </div>
                                                        <ChevronRightIcon className="h-4 w-4 text-gray-500 hidden lg:block" />
                                                        <ChevronDownIcon className={`w-5 h-5 text-gray-400 transition-transform duration-300 lg:hidden ${isAccordionOpen ? 'transform rotate-180' : ''}`} />
                                                    </button>
                                                    {isAccordionOpen && section && (
                                                        <AccordionContent 
                                                            section={section} 
                                                            isReportUnlocked={isReportUnlocked} 
                                                            onUnlock={() => setIsReportUnlocked(true)}
                                                            topFix={fix}
                                                        />
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </div>
                                    
                                    <div className="border-t border-gray-700 my-4"></div>
                                    
                                    <h3 className="font-semibold text-gray-200 mb-3">Detailed Report</h3>
                                    <div className="space-y-2">
                                        {(report.sections || []).map(section => {
                                            const isAccordionOpen = openAccordionId === section.id;
                                            return (
                                                <div key={section.id} className={`rounded-lg overflow-hidden transition-colors duration-200 ${isAccordionOpen ? 'bg-gray-800' : 'bg-transparent'}`}>
                                                    <button onClick={() => {
                                                                setActiveView({ type: 'section', id: section.id });
                                                                setOpenAccordionId(isAccordionOpen ? null : section.id);
                                                            }}
                                                        className={`w-full text-left p-3 flex items-center border-2 transition-colors ${activeView.type === 'section' && activeView.id === section.id ? `border-green-500 lg:bg-gray-800` : 'border-transparent'} ${isAccordionOpen ? 'lg:bg-transparent' : ''} hover:bg-gray-800/50`}>
                                                        <p className="font-semibold text-gray-100 flex-grow">{section.title}</p>
                                                        <div className={`font-bold text-lg mr-3`} style={{color: getScoreColor(section.score)}}>{section.score}</div>
                                                        <ChevronDownIcon className={`w-5 h-5 text-gray-400 transition-transform duration-300 lg:hidden ${isAccordionOpen ? 'transform rotate-180' : ''}`} />
                                                    </button>
                                                     {isAccordionOpen && (
                                                        <AccordionContent 
                                                            section={section} 
                                                            isReportUnlocked={isReportUnlocked} 
                                                            onUnlock={() => setIsReportUnlocked(true)}
                                                        />
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </aside>

                            <main className="hidden lg:block lg:col-span-8 xl:col-span-9">
                                <MainContentPane report={report} activeView={activeView} isReportUnlocked={isReportUnlocked} onUnlock={() => setIsReportUnlocked(true)} />
                            </main>
                        </div>
                    )}
                </div>
            );
        };

        const CoursesPageThemed = () => {
             return (
                 <div className="container mx-auto px-4 sm:px-6 py-16 md:py-20 animate-fade-in min-h-[70vh]">
                     <div className="max-w-3xl mx-auto text-center">
                        <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-white">Our Courses</h1>
                        <p className="mt-4 text-gray-400">Invest in yourself. Learn the skills that will get you hired.</p>
                    </div>
                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12 md:mt-16">
                        {MOCK_COURSES.map(course => (
                            <Card key={course.id} className="flex flex-col">
                                <div className="p-6 flex-grow">
                                    <div className="flex justify-between items-start">
                                        <p className="text-sm font-semibold text-[#00C853]">{course.level}</p>
                                        <p className="text-lg font-bold text-white">{course.price}</p>
                                    </div>
                                    <h3 className="text-xl font-bold mt-2 text-white">{course.title}</h3>
                                    <p className="text-gray-400 mt-2 text-sm">{course.description}</p>
                                </div>
                                <div className="p-6 border-t border-gray-800">
                                    <button className="w-full py-2 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400 transition-colors">
                                        Enroll Now
                                    </button>
                                </div>
                            </Card>
                        ))}
                    </div>
                 </div>
             );
        };

        const FreelancePageThemed = () => {
            const { showNotification } = useAppContext();
            const [selectedJob, setSelectedJob] = React.useState(null);
            const [coverLetter, setCoverLetter] = React.useState('');
            const [isAiLoading, setIsAiLoading] = React.useState(false);

            const handleGenerateCoverLetter = async (job) => {
                setSelectedJob(job);
                setCoverLetter('');
                setIsAiLoading(true);
                // This is a mock API call, in a real app this would call Gemini.
                setTimeout(() => {
                    setCoverLetter(`Dear Hiring Manager at ${job.company},\n\nI am writing to express my strong interest in the ${job.title} role I saw advertised on Xperto. With my experience in ${job.skill}, I am confident I can contribute effectively to your team.\n\nThank you for your time and consideration.\n\nSincerely,\nA Job Seeker`);
                    setIsAiLoading(false);
                }, 1000);
            };

            return (
                <div className="container mx-auto px-4 sm:px-6 py-16 md:py-20 animate-fade-in min-h-[70vh]">
                    <div className="max-w-3xl mx-auto text-center">
                        <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-white">Find Internships & Part-Time Work</h1>
                        <p className="mt-4 text-gray-400">Gain real-world experience and earn while you learn.</p>
                    </div>
                    <div className="space-y-6 max-w-4xl mx-auto mt-12 md:mt-16">
                        {MOCK_JOBS.map(job => (
                            <Card key={job.id} className="p-6 hover:border-[#00C853]/80">
                                <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                                    <div>
                                        <h3 className="text-xl font-bold text-white">{job.title}</h3>
                                        <p className="text-gray-400">{job.company}</p>
                                    </div>
                                    <div className="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
                                        <button onClick={() => showNotification(`Applied for ${job.title}!`)} className="w-full sm:w-auto px-6 py-2 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400">Apply Now</button>
                                        <button onClick={() => handleGenerateCoverLetter(job)} className="w-full sm:w-auto flex items-center justify-center px-4 py-2 font-semibold text-[#00C853] bg-green-500/10 rounded-lg hover:bg-green-500/20"><SparklesIcon /> Generate Cover Letter</button>
                                    </div>
                                </div>
                            </Card>
                        ))}
                    </div>
                     {selectedJob && (
                        <Modal title={`AI Cover Letter for ${selectedJob.title}`} onClose={() => setSelectedJob(null)}>
                            {isAiLoading ? (
                                <p className="text-center text-gray-400 py-12">Generating your cover letter with AI...</p>
                            ) : (
                                <>
                                    <textarea readOnly value={coverLetter} className="w-full h-64 p-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-300 text-sm whitespace-pre-wrap"></textarea>
                                    <button onClick={() => { navigator.clipboard.writeText(coverLetter); showNotification('Copied to clipboard!'); setSelectedJob(null); }} className="mt-4 w-full py-2 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400">Copy & Close</button>
                                </>
                            )}
                        </Modal>
                    )}
                </div>
            );
        };

        const LoginPageThemed = () => {
            const { setUser, setPage, showNotification } = useAppContext();
            const handleLogin = (e) => {
                e.preventDefault();
                setUser({ email: 'student@xperto.com' });
                setPage('dashboard');
                showNotification('Login successful!');
            };
            return (
                <div className="container mx-auto px-4 sm:px-6 py-16 md:py-20 flex justify-center items-center min-h-[70vh]">
                    <Card className="max-w-md w-full p-8 border border-gray-800">
                        <h2 className="text-2xl font-bold text-center mb-6 text-white">Login to Xperto</h2>
                        <form onSubmit={handleLogin} className="space-y-4">
                            <input type="email" placeholder="Email" required className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-[#00C853] focus:outline-none"/>
                            <input type="password" placeholder="Password" required className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-[#00C853] focus:outline-none"/>
                            <button type="submit" className="w-full py-3 font-semibold text-black bg-[#00C853] rounded-lg hover:bg-green-400">Login</button>
                        </form>
                    </Card>
                </div>
            );
        };

        const DashboardPageThemed = () => {
            const { user, setUser, setPage } = useAppContext();
            if (!user) { 
                React.useEffect(() => setPage('login'), []);
                return null;
            }
            const userCourses = MOCK_COURSES.filter(c => c.id === 2);
            return (
                <div className="container mx-auto px-4 sm:px-6 py-16 md:py-20 animate-fade-in min-h-[70vh]">
                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                        <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-white">Dashboard</h1>
                        <button onClick={() => {setUser(null); setPage('home');}} className="text-sm text-red-500 hover:underline">Logout</button>
                    </div>
                    <div className="grid md:grid-cols-2 gap-8 mt-12">
                        <Card className="p-6"><h2 className="text-2xl font-bold mb-4 text-white">My Courses</h2>
                            {userCourses.length > 0 ? <ul className="space-y-3 text-gray-300">{userCourses.map(c => <li key={c.id}>{c.title}</li>)}</ul> : <p>No courses yet.</p>}
                        </Card>
                        <Card className="p-6"><h2 className="text-2xl font-bold mb-4 text-white">My Applications</h2><p>No applications yet.</p></Card>
                    </div>
                </div>
            );
        };
        
        // --- Main App Component ---
        const CustomCursor = () => {
            const cursorRef = React.useRef(null);
            React.useEffect(() => {
                if (cursorRef.current) {
                    const moveCursor = (e) => {
                        cursorRef.current.style.left = `${e.clientX}px`;
                        cursorRef.current.style.top = `${e.clientY}px`;
                    };
                    window.addEventListener('mousemove', moveCursor);
                    return () => window.removeEventListener('mousemove', moveCursor);
                }
            }, []);
            return <div ref={cursorRef} className="custom-cursor hidden md:block"></div>
        }

        const MainContent = () => {
            const { page } = useAppContext();
            const renderPage = () => {
                switch (page) {
                    case 'home': return <HomePage />;
                    case 'courses': return <CoursesPageThemed />;
                    case 'analyzer': return <AnalyzerPage />;
                    case 'freelance': return <FreelancePageThemed />;
                    case 'login': return <LoginPageThemed />;
                    case 'dashboard': return <DashboardPageThemed />;
                    default: return <HomePage />;
                }
            };
            return (
                <div className="bg-black font-sans text-gray-300">
                    <Header />
                    <main>{renderPage()}</main>
                    <Footer />
                </div>
            );
        }

        function App() {
            return (
                <AppProvider>
                    <CustomCursor />
                    <MainContent />
                </AppProvider>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
